<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <style>@keyframes loader{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}:root{--bg-color:#f6f6ef;--text-color:#000;--muted-color:rgba(0, 0, 0, 0.5);--highlight-color:#a28ad2;--navbar-selected-color:#fff}@media (prefers-color-scheme:dark){:root{--bg-color:#222;--text-color:#ccc;--muted-color:#aaa;--highlight-color:#457b9d;--navbar-selected-color:#222}}body,html{box-sizing:border-box;margin:0;color:var(--text-color);background-color:var(--bg-color);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}*,:after,:before{box-sizing:inherit}pre{overflow-x:auto}table td,table td *{vertical-align:top}a{color:var(--highlight-color)}a:not(.navbar-link):not(.client-link):visited{color:var(--muted-color)}.article-link:hover,.article-title:hover,a:hover{text-decoration:underline;cursor:pointer}a.client-link{color:inherit;text-decoration:inherit}.container,.content{display:flex;flex-direction:column}.container{max-width:900px;margin:0 auto}.content{padding:5px;overflow-y:auto;border-bottom:1px solid var(--muted-color)}.footer{padding:30px;text-align:center}.article{padding:10px;display:flex;flex-direction:row;flex-shrink:0}.article-index{width:30px;text-align:right;margin-right:10px;flex-shrink:0}.article-title{text-decoration:none;color:var(--text-color)}.article-text{margin-top:10px}.meta-text{font-size:.8em;color:var(--muted-color)}.host{display:inline-block}.submitted{margin-top:20px}.submitted-item{margin-bottom:10px}.paging-controls{width:100%;text-align:center;margin:20px 0}.paging-controls .active{text-decoration:underline}.comments,.submitted-content{display:flex;flex-direction:column;border-top:1px solid var(--muted-color);padding:10px;flex-shrink:0}.comment:not(:first-child){margin-top:10px}.comment-child{margin-left:40px}.comment-info{color:var(--muted-color);margin-bottom:10px}.comment-expand{color:var(--muted-color);cursor:pointer}.comment-expand:hover{text-decoration:underline}.comment-expand,.comment-text{padding-left:20px}.navbar{background-color:var(--highlight-color);padding:6px;margin-bottom:10px;display:flex;flex-direction:row;flex-shrink:0}.navbar a{cursor:pointer;text-decoration:none;margin:0 5px}.navbar a.active{color:var(--navbar-selected-color)}.navbar .logo{font-weight:700}.navbar-links{flex:1}.navbar-link img{height:15px;width:15px}.loader-container{width:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.loader{display:inline-block;width:80px;height:80px}.loader:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid var(--highlight-color);border-color:var(--highlight-color) transparent var(--highlight-color) transparent;animation:loader 1.2s linear infinite}</style>
  <title>Innerself Hacker News</title>
</head>

<body>
  <div id="root"></div>
  <script>
  // Single Page Apps for GitHub Pages
  // MIT License
  // https://github.com/rafgraph/spa-github-pages
  // This script checks to see if a redirect is present in the query string,
  // converts it back into the correct url and adds it to the
  // browser's history using window.history.replaceState(...),
  // which won't cause the browser to attempt to load the new url.
  // When the single page app is loaded further down in this file,
  // the correct url will be waiting in the browser's history for
  // the single page app to route accordingly.
  (function (l) {
    if (l.search[1] === '/') {
      var decoded = l.search.slice(1).split('&').map(function (s) {
        return s.replace(/~and~/g, '&')
      }).join('?');
      window.history.replaceState(null, null,
        l.pathname.slice(0, -1) + decoded + l.hash
      );
    }
  }(window.location))
</script>
  <script>!function(){"use strict";function t([t,...e],...s){return s.reduce((t,s)=>t.concat(s,e.shift()),[t]).filter(t=>null!=t).join("")}const e=t=>C(14,{entities:t.reduce((t,e)=>L(t,{[e.id]:e}),{})}),s=(t,e)=>{const s=t.db.entities;return s&&s[e]},n=(t,e={})=>{const s=new URLSearchParams;return R(e).forEach(t=>s.set(t,e[t])),O(`https://hacker-news.firebaseio.com/v0//${t}.json?${s}`).then(t=>t.json())},i=t=>(((t,e=20)=>n((t||"top")+"stories"))(t).then(e=>W(((t,e)=>C(2,{id:t,submissions:e}))(t,e))).catch(e=>W(((t,e)=>C(3,{id:t,error:e}))(t,e))),(t=>C(1,{id:t}))(t)),r=t=>{const s=t.map(b);return(t=>Promise.all(t.map(t=>n(`item/${t}`))))(s).then(t=>W((t=>(W(C(6,{ids:t.map(({id:t})=>t)})),e(t)))(t))).catch(t=>W(((t,e)=>C(7,{error:t,ids:e}))(t,s))),(t=>C(5,{ids:t}))(s)},a=t=>((t=>n(`user/${t}`).then(t=>L(t,{type:"user"})))(t).then(t=>W((t=>(W(C(10,{id:t.id})),e([t])))(t))).catch(e=>W(((t,e)=>C(11,{error:t,id:e}))(e,t))),(t=>C(9,{id:t}))(t)),c=t=>{const{id:e,ids:s}=t;return s||void 0!==e&&[e]||[]},o=(t,e,s)=>{const n=c(e.payload);return n.length?L(t,{requesting:L(t.requesting,n.reduce((t,e)=>L(t,{[e]:s}),{}))}):t},d=t=>t.submissions,l=t=>d(t).failed,u=t=>d(t).requesting,m="_in_",p=new RegExp(["^",m,".*:ts$"].join("")),h=localStorage,$=t=>new URLSearchParams(t),v=/https?:&#x2F;&#x2F;news\.ycombinator\.com/g,{protocol:y,host:f}=location,g=(t,e=0)=>setTimeout(t,e),x=Date.now,b=Number,w=t=>`${t}`,k=()=>x()-6e4,q=t=>!!t&&"story"===t.type,j=t=>!!t&&"comment"===t.type,I=t=>"string"==typeof t,E=Math.max,S=Math.round,R=Object.keys,L=(...t)=>Object.assign({},...t),M=(t,e)=>{const s=u(t),n=l(t);return!s[e]&&(!n[e]||n[e]<k())},N=(t,e)=>{const n=s(t,e);if(n)return n;M(t,e)&&W(r([e]))},O=(t,e)=>{const s=`${m}${t}`,n=h.getItem(s),i=h.getItem(s+":ts");if(n&&i){if(x()-b(i)<6e4){const t=new Response(new Blob([n]));return Promise.resolve(t)}h.removeItem(s),h.removeItem(s+":ts")}return fetch(t,e).then(t=>{if(200===t.status){const e=t.headers.get("Content-Type");e&&(e.match(/application\/json/i)||e.match(/text\//i))&&t.clone().text().then(t=>{h.setItem(s,t),h.setItem(s+":ts",w(x()))})}return t})},P=t=>{const e=$();return R(t).forEach(s=>e.set(s,t[s])),w(e)},T=(t,e,s)=>{const n=S(t/e);return n+" "+s+(t=>1===t?" ago":"s ago")(n)},B=t=>{const e=x()-1e3*t;switch(!0){case e>864e5:return T(e,864e5,"day");case e>36e5:return T(e,36e5,"hour");case e>6e4:return T(e,6e4,"minute");default:return"less than a minute ago"}},U=(t="")=>t.replace(v,`${y}//${f}`),C=(t,e)=>({type:t,payload:e}),D=()=>{const t=R(h),e=[],s=x()-6e7;let n=t.length;for(;n--;){const i=t[n];if(p.test(i)){const t=h.getItem(i);if(Number(t)<s&&(e.push(i),e.length>100))break}}if(e.length){let t=e.length;for(;t--;){const s=e[t];h.removeItem(s),h.removeItem(s.replace(":ts",""))}g(D)}},F=["new","comments","","item","show","ask","user"],_=()=>{const t=location.pathname.slice(1),e=-1!==F.indexOf(t),s=(t=>Array.from($(t)).reduce((t,[e,s])=>L(t,{[e]:s}),{}))(location.search),n=e?t:"";return e||history.pushState({},"Innerself News","/"),{path:n,query:s}},A=t=>t.router,H=t=>A(t).query||{},J=t=>A(t).path,z=((...t)=>{const e=t.pop();return e?s=>t.reduceRight((t,e)=>e(t),e(s)):t=>t})((()=>(window.addEventListener("popstate",()=>W(C(12,_()))),t=>{switch(t.type){case 13:{const{payload:e}=t,{path:s,query:n}=e,i=n&&P(n);return history.pushState({},s,(s||"/")+(i?"?"+i:"")),C(12,e)}}return t}))(),(()=>{const t=((t,e=1e3)=>{let s=null;return()=>{null!==s&&clearTimeout(s),s=g(t,e)}})(D);return e=>(t(),e)})());const G=(t=>{const e=R(t),s=(()=>C(0,{}))();return(n,i=s)=>e.reduce((e,s)=>(e[s]=t[s](e[s],i),e),n||{})})({router:(t=_(),e)=>{switch(e.type){case 12:return L(e.payload,{previous:L(t,{previous:void 0})});default:return t}},submissions:(t={requesting:{},expanded:{},items:{},failed:{}},e)=>{switch(e.type){case 4:return L(t,{items:{}});case 1:return o(t,e,!0);case 2:{const s=e.payload.id;return L(o(t,e,!1),{items:L(t.items,{[s]:e.payload.submissions})})}case 7:case 11:case 3:{const s=c(e.payload);return s?L(o(t,e,!1),{failed:s.reduce((e,s)=>L(t,{[s]:x()}),t.failed)}):t}case 9:case 5:return o(t,e,!0);case 10:case 6:return o(t,e,!1);case 8:{const{id:s}=e.payload,{expanded:n}=t;return L(t,{expanded:L(n,{[s]:!n[s]})})}}return t},db:(t={entities:{}},e)=>{switch(e.type){case 14:return L(t,{entities:L(t.entities,e.payload.entities)});default:return t}}}),{dispatch:K,connect:Q,attach:V}=function(t){let e=t();const s=new Map,n=new Map;function i(){for(const[t,i]of s){const s=i();if(s!==n.get(t)){n.set(t,s),t.innerHTML=s;const i=new CustomEvent("render",{detail:e});t.dispatchEvent(i)}}}return{attach(t,e){s.set(e,t),i()},connect:t=>(...s)=>t(e,...s),dispatch(s,...n){e=t(e,s,n),i()}}}((t=>(e,s)=>t(e,s&&z(s)))(G));function W(t,e){return e?`'event.preventDefault();dispatch(${JSON.stringify(t)})'`:K(t)}window.dispatch=W;const X=(t,e)=>W(((t,e)=>C(13,{path:t,query:e}))(t,e),!0),Y=e=>{const{path:s,text:n,query:i={},cls:r=""}=e,a=P(i);return t`
    <a href="/${s+(a?`?${a}`:"")}" class="${r} client-link" onclick=${X(s,i)}>
      ${n||s}
    </a>
  `},Z=()=>t`<div class="loader-container"><div class="loader"></div></div>`,tt=(e,s)=>t`
  <a
    class="${"comment"}-expand meta-text"
    onclick=${W((t=>C(8,{id:b(t)}))(e),!0)}
  >
    ${s}
  </a>
`,et=Q((e,s)=>{const{id:n,compact:i,child:r}=s,a=(t=>d(t).expanded)(e),c=N(e,n);if(!j(c))return"";const o=c.by?Y({path:"user",text:`${c.by}`,cls:`${st}-link`,query:{id:c.by||""}}):"[deleted]",l=Y({path:"item",text:B(c.time),cls:`${st}-link`,query:{id:`${c.id}`}}),u=i&&Y({path:"item",text:"parent",cls:`${st}-link`,query:{id:`${c.parent}`}}),m=c.kids||[],p=a[n]?tt(n,"hide children"):tt(n,`show children (${m.length})`),h=m.length&&!i,$=h&&a[n]?m.map(t=>et({id:t,child:!0})).join("")||Z():"";return t`
    <div class="${"comment"} ${r?"comment-child":""}">
      <div class="${"comment"}-info meta-text">
        ${o} ${l} ${u?"| "+u:""}
      </div>
      <div class="${"comment"}-text">${U(c.text)}</div>
      ${h?p:""} ${U($)}
    </div>
  `}),st="article",nt=({item:e,index:s,text:n})=>{const i=Y({path:"user",text:`${e.by}`,cls:`${st}-link`,query:{id:e.by||""}}),r=Y({path:"item",text:`${e.title}`,cls:`${st}-title`,query:{id:`${e.id}`}}),a=Y({path:"item",text:`${e.descendants||0} comments`,cls:`${st}-link`,query:{id:`${e.id}`}}),c=void 0!==s?t`<div class="${st}-index">${s+1}.</div>`:"",o=n?t` <div class="${st}-text">${e.text}</div> `:"",d=e.url,l=d&&new URL(d).hostname,u=d?`<a class="${st}-title" href="${d}">${e.title}</a> `+(l?`<div class="host meta-text">(${l.replace("www.","")})</div>`:""):r;return t`
    <div class="${st}">
      ${c}
      <div>
        ${u}
        <div class="${st}-info meta-text">
          ${e.score} points by ${i} ${B(e.time)} | ${a}
        </div>
        ${o}
      </div>
    </div>
  `},it=Q((e,n)=>{const{items:i,skip:r=0}=n,a=i.map(t=>s(e,t)).filter(q);return t`
    <div class="${st}-list">
      ${a.length?a.map((t,e)=>nt({item:t,index:e+r||0})):"(no items)"}
    </div>
  `}),rt=Q((t,e,s)=>{const n=H(t),i=J(t);return Y({path:i,text:e,query:L(n,{skip:"next"===e?s+20:E(0,s-20)})})}),at=(t,e)=>{const n=((t,e)=>d(t).items[e])(t,e),a=H(t);if(!n)return M(t,e)&&W(i(e)),Z();const c="skip"in a?b(a.skip):0,o=n.slice(c,c+20),l=o.filter(e=>!s(t,e));if(l.length){const e=l.filter(e=>M(t,e));return e.length&&W(r(e)),Z()}{const t=c+20<n.length,e=0!==c;return`\n      ${it({items:o,skip:c})}\n      <div class="paging-controls meta-text">\n        ${e?rt("previous",c):""}\n        ${e&&t?" | ":""}\n        ${t?rt("next",c):""}\n      </div>\n    `}},ct=()=>t`Oops, not found...`,ot=Q((t,e)=>{const s=J(t)===e.path,n=(e.cls||"")+" navbar-link "+(s?"active":"");return Y(L(e,{cls:n,query:{}}))}),dt=[{path:"new"},{path:"show"},{path:"ask"}],lt=t=>t?`<div class="submitted-item">${t.trim()}</div>`:"",ut=t=>{const{id:e=""}=H(t),n=u(t),i=l(t);if(!e)return ct();const r=s(t,e);return r&&"user"!==r.type?ct():r||(n[e]||i[e]&&!(i[e]<k())||W(a(e)),Z())},mt=(t,e)=>`<tr><td>${t}:</td><td>${e}</td></tr>`,pt=e=>{const n=ut(e);return I(n)?n:t`
        <table>
          ${[mt("user",n.id),mt("created",B(n.created)),mt("karma",n.karma),mt("about",n.about||"blank")]}
        </table>
        ${(e=>{const n=ut(e),i=H(e),a=J(e);if(I(n))return n;const{submitted:c=[]}=n,o=c.length,d="skip"in i?b(i.skip):0,l="type"in i?i.type:"all",u=c.slice(d,d+20),m=u.filter(t=>!s(e,t));if(m.length){const t=m.filter(t=>M(e,t));t.length&&W(r(t))}const p=0!==d,h=d+20<o,$="all"===l,v=$||"comments"===l,y=$||"stories"===l,f=m.length?Z():u.map(t=>{const n=s(e,t);switch(!0){case j(n):return v?et({id:t,compact:!0}):"";case q(n):return y?nt({item:n}):""}}).map(lt).join(""),g=[{text:"show all",query:L(i,{type:"all"})},{text:"comments only",query:L(i,{type:"comments"})},{text:"stories only",query:L(i,{type:"stories"})}];return t`
    <div class="${"submitted"}">
      <div class="${"submitted"}-title">submissions by ${n.id}</div>
      <div class="paging-controls meta-text">
        ${p?rt("previous",d)+"|":""}
        ${g.map(t=>Y(L({cls:t.query.type===l?"active":"",path:a},t))).join("|")}
        ${h?"|"+rt("next",d):""}
      </div>
      <div class="${"submitted"}-content">${f||"(none)"}</div>
    </div>
  `})(e)}
      `},ht=Q(e=>{const s=J(e);switch(s){case"":case"new":case"ask":case"show":return at(e,s);case"item":return(e=>{const{id:s=""}=H(e);if(!s)return ct();const n=N(e,s);if(!q(n)&&!j(n))return Z();const{kids:i}=n,r=i?i.map(t=>et({id:t})).join(""):"(no comments)";return t`
    ${j(n)?et({id:s,compact:!0}):nt({item:n,text:!0})}
    <div class="comments">${""===r?Z():r}</div>
  `})(e);case"user":return pt(e);default:return ct()}});V(()=>t`
  <div class="container">
    ${(()=>t`
  <div class="navbar">
    <div class="navbar-links">
      ${ot({path:"",cls:"logo",text:"Innerself News"})}
      ${dt.map(ot).join(" | ")}
    </div>
    <a class="navbar-link" href="https://github.com/bsouthga/innerself-hn">
      <img src="github.svg" />
    </a>
  </div>
`)()}
    <div class="content">${ht()}</div>
    <div class="footer meta-text">
      <a href="https://bsou.io">Ben Southgate</a> | 2017
    </div>
  </div>
`,document.getElementById("root"))}();</script>
</body>

</html>